- name: upgrade image via scp
  gather_facts: no
  hosts: routers
  tasks:
    - ntc_file_copy:
        local_file: /home/vagrant/shared/images/{{ image_one }}
        platform: "{{ platform }}"
        username: "{{ ansible_user }}"
        password: "{{ ansible_password }}"
        host: "{{ ansible_host }}"
        file_system: "flash0:"
      register: scp
    - debug: var=scp
    - ntc_install_os:
        platform: "{{ platform }}"
        username: "{{ ansible_user }}"
        password: "{{ ansible_password }}"
        host: "{{ ansible_host }}"
        system_image_file: "{{ image_one }}"
      register: install
    - debug: var=install
    - ntc_reboot:
        platform: "{{ platform }}"
        username: "{{ ansible_user }}"
        password: "{{ ansible_password }}"
        host: "{{ ansible_host }}"
        confirm: true
        timer: 1
      register: reboot
    - debug: var=reboot
    # - ios_command:
    #     provider: "{{ cli }}"
    #     commands:
    #       - reload in 1
    #   register: reload
    # - debug: var=reload.stdout_lines
